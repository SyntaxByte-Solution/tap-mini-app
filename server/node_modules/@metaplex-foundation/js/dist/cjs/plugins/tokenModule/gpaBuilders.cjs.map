{"version":3,"file":"gpaBuilders.cjs","sources":["../../../../src/plugins/tokenModule/gpaBuilders.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { MINT_SIZE, ACCOUNT_SIZE, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Metaplex } from '@/Metaplex';\nimport { GpaBuilder } from '@/utils';\nimport { BigNumber } from '@/types';\n\nexport class MintGpaBuilder extends GpaBuilder {\n  constructor(metaplex: Metaplex, programId?: PublicKey) {\n    super(metaplex, programId ?? TOKEN_PROGRAM_ID);\n    this.whereSize(MINT_SIZE);\n  }\n\n  whereDoesntHaveMintAuthority() {\n    return this.where(0, 0);\n  }\n\n  whereHasMintAuthority() {\n    return this.where(0, 1);\n  }\n\n  whereMintAuthority(mintAuthority: PublicKey) {\n    return this.whereHasMintAuthority().where(4, mintAuthority);\n  }\n\n  whereSupply(supply: number | BigNumber) {\n    return this.where(36, supply);\n  }\n\n  // TODO(loris): Map the rest of the layout.\n  // https://github.com/solana-labs/solana-program-library/blob/master/token/js/src/state/mint.ts#L43\n}\n\nexport class TokenGpaBuilder extends GpaBuilder {\n  constructor(metaplex: Metaplex, programId?: PublicKey) {\n    super(metaplex, programId ?? TOKEN_PROGRAM_ID);\n    this.whereSize(ACCOUNT_SIZE);\n  }\n\n  selectMint() {\n    return this.slice(0, 32);\n  }\n\n  whereMint(mint: PublicKey) {\n    return this.where(0, mint);\n  }\n\n  selectOwner() {\n    return this.slice(32, 32);\n  }\n\n  whereOwner(owner: PublicKey) {\n    return this.where(32, owner);\n  }\n\n  selectAmount() {\n    return this.slice(64, 8);\n  }\n\n  whereAmount(amount: number | BigNumber) {\n    return this.where(64, amount);\n  }\n\n  whereDoesntHaveDelegate() {\n    return this.where(72, 0);\n  }\n\n  whereHasDelegate() {\n    return this.where(72, 1);\n  }\n\n  whereDelegate(delegate: PublicKey) {\n    return this.whereHasDelegate().where(76, delegate);\n  }\n\n  // TODO(loris): Map the rest of the layout.\n  // https://github.com/solana-labs/solana-program-library/blob/master/token/js/src/state/account.ts#L59\n}\n"],"names":["MintGpaBuilder","GpaBuilder","constructor","metaplex","programId","TOKEN_PROGRAM_ID","whereSize","MINT_SIZE","whereDoesntHaveMintAuthority","where","whereHasMintAuthority","whereMintAuthority","mintAuthority","whereSupply","supply","TokenGpaBuilder","ACCOUNT_SIZE","selectMint","slice","whereMint","mint","selectOwner","whereOwner","owner","selectAmount","whereAmount","amount","whereDoesntHaveDelegate","whereHasDelegate","whereDelegate","delegate"],"mappings":";;;;;;;AAMO,MAAMA,cAAc,SAASC,qBAAU,CAAC;AAC7CC,EAAAA,WAAW,CAACC,QAAkB,EAAEC,SAAqB,EAAE;AACrD,IAAA,KAAK,CAACD,QAAQ,EAAEC,SAAS,IAAIC,yBAAgB,CAAC,CAAA;AAC9C,IAAA,IAAI,CAACC,SAAS,CAACC,kBAAS,CAAC,CAAA;AAC3B,GAAA;AAEAC,EAAAA,4BAA4B,GAAG;AAC7B,IAAA,OAAO,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AACzB,GAAA;AAEAC,EAAAA,qBAAqB,GAAG;AACtB,IAAA,OAAO,IAAI,CAACD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AACzB,GAAA;EAEAE,kBAAkB,CAACC,aAAwB,EAAE;IAC3C,OAAO,IAAI,CAACF,qBAAqB,EAAE,CAACD,KAAK,CAAC,CAAC,EAAEG,aAAa,CAAC,CAAA;AAC7D,GAAA;EAEAC,WAAW,CAACC,MAA0B,EAAE;AACtC,IAAA,OAAO,IAAI,CAACL,KAAK,CAAC,EAAE,EAAEK,MAAM,CAAC,CAAA;AAC/B,GAAA;;AAEA;AACA;AACF,CAAA;;AAEO,MAAMC,eAAe,SAASd,qBAAU,CAAC;AAC9CC,EAAAA,WAAW,CAACC,QAAkB,EAAEC,SAAqB,EAAE;AACrD,IAAA,KAAK,CAACD,QAAQ,EAAEC,SAAS,IAAIC,yBAAgB,CAAC,CAAA;AAC9C,IAAA,IAAI,CAACC,SAAS,CAACU,qBAAY,CAAC,CAAA;AAC9B,GAAA;AAEAC,EAAAA,UAAU,GAAG;AACX,IAAA,OAAO,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAA;AAC1B,GAAA;EAEAC,SAAS,CAACC,IAAe,EAAE;AACzB,IAAA,OAAO,IAAI,CAACX,KAAK,CAAC,CAAC,EAAEW,IAAI,CAAC,CAAA;AAC5B,GAAA;AAEAC,EAAAA,WAAW,GAAG;AACZ,IAAA,OAAO,IAAI,CAACH,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AAC3B,GAAA;EAEAI,UAAU,CAACC,KAAgB,EAAE;AAC3B,IAAA,OAAO,IAAI,CAACd,KAAK,CAAC,EAAE,EAAEc,KAAK,CAAC,CAAA;AAC9B,GAAA;AAEAC,EAAAA,YAAY,GAAG;AACb,IAAA,OAAO,IAAI,CAACN,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;AAC1B,GAAA;EAEAO,WAAW,CAACC,MAA0B,EAAE;AACtC,IAAA,OAAO,IAAI,CAACjB,KAAK,CAAC,EAAE,EAAEiB,MAAM,CAAC,CAAA;AAC/B,GAAA;AAEAC,EAAAA,uBAAuB,GAAG;AACxB,IAAA,OAAO,IAAI,CAAClB,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;AAC1B,GAAA;AAEAmB,EAAAA,gBAAgB,GAAG;AACjB,IAAA,OAAO,IAAI,CAACnB,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;AAC1B,GAAA;EAEAoB,aAAa,CAACC,QAAmB,EAAE;IACjC,OAAO,IAAI,CAACF,gBAAgB,EAAE,CAACnB,KAAK,CAAC,EAAE,EAAEqB,QAAQ,CAAC,CAAA;AACpD,GAAA;;AAEA;AACA;AACF;;;;;"}