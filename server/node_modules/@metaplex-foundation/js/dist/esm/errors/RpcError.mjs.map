{"version":3,"file":"RpcError.mjs","sources":["../../../src/errors/RpcError.ts"],"sourcesContent":["import { SendTransactionError, TransactionError } from '@solana/web3.js';\nimport { MetaplexError } from './MetaplexError';\nimport type { ConfirmTransactionResponse } from '@/plugins/rpcModule';\n\n/** @group Errors */\nexport class RpcError extends MetaplexError {\n  readonly name: string = 'RpcError';\n  constructor(message: string, cause?: Error) {\n    super(message, 'rpc', undefined, cause);\n  }\n}\n\n/** @group Errors */\nexport class FailedToSendTransactionError extends RpcError {\n  readonly name: string = 'FailedToSendTransactionError';\n  constructor(cause: Error) {\n    const message =\n      'The transaction could not be sent successfully to the network. ' +\n      'Please check the underlying error below for more details.';\n    super(message, cause);\n    if (this.errorLogs.length > 0) {\n      this.message =\n        this.message +\n        `\\nProgram Logs:\\n${this.errorLogs\n          .map((log) => '| ' + log)\n          .join('\\n')}\\n`;\n    }\n  }\n\n  public asSendTransactionError(): SendTransactionError {\n    return this.cause as SendTransactionError;\n  }\n\n  public get error() {\n    return this.asSendTransactionError().message;\n  }\n\n  public get errorLogs() {\n    return this.asSendTransactionError().logs ?? [];\n  }\n}\n\n/** @group Errors */\nexport class FailedToConfirmTransactionError extends RpcError {\n  readonly name: string = 'FailedToConfirmTransactionError';\n  constructor(cause: Error) {\n    const message =\n      'The transaction could not be confirmed. ' +\n      'Please check the underlying error below for more details.';\n    super(message, cause);\n  }\n}\n\n/** @group Errors */\nexport class FailedToConfirmTransactionWithResponseError extends FailedToConfirmTransactionError {\n  readonly name: string = 'FailedToConfirmTransactionWithResponseError';\n  readonly response: ConfirmTransactionResponse;\n\n  constructor(response: ConfirmTransactionResponse) {\n    const getMessage = (error: TransactionError | null): string => {\n      if (!error) return 'Unknown error';\n      if (typeof error === 'string') return error;\n      try {\n        return JSON.stringify(error);\n      } catch (error) {\n        return 'Unknown error';\n      }\n    };\n\n    super(new Error(getMessage(response.value.err)));\n    this.response = response;\n  }\n\n  public get error(): TransactionError {\n    return this.response.value.err ?? 'Unknown error';\n  }\n}\n"],"names":["RpcError","MetaplexError","constructor","message","cause","undefined","FailedToSendTransactionError","errorLogs","length","map","log","join","asSendTransactionError","error","logs","FailedToConfirmTransactionError","FailedToConfirmTransactionWithResponseError","response","getMessage","JSON","stringify","Error","value","err"],"mappings":";;;AAIA;AACO,MAAMA,QAAQ,SAASC,aAAa,CAAC;AAE1CC,EAAAA,WAAW,CAACC,OAAe,EAAEC,KAAa,EAAE;IAC1C,KAAK,CAACD,OAAO,EAAE,KAAK,EAAEE,SAAS,EAAED,KAAK,CAAC,CAAA;AAAC,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EAFlB,UAAU,CAAA,CAAA;AAGlC,GAAA;AACF,CAAA;;AAEA;AACO,MAAME,4BAA4B,SAASN,QAAQ,CAAC;EAEzDE,WAAW,CAACE,KAAY,EAAE;AACxB,IAAA,MAAMD,OAAO,GACX,iEAAiE,GACjE,2DAA2D,CAAA;AAC7D,IAAA,KAAK,CAACA,OAAO,EAAEC,KAAK,CAAC,CAAA;AAAC,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EALA,8BAA8B,CAAA,CAAA;AAMpD,IAAA,IAAI,IAAI,CAACG,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAI,CAACL,OAAO,GACV,IAAI,CAACA,OAAO,GACX,CAAA,iBAAA,EAAmB,IAAI,CAACI,SAAS,CAC/BE,GAAG,CAAEC,GAAG,IAAK,IAAI,GAAGA,GAAG,CAAC,CACxBC,IAAI,CAAC,IAAI,CAAE,CAAG,EAAA,CAAA,CAAA;AACrB,KAAA;AACF,GAAA;AAEOC,EAAAA,sBAAsB,GAAyB;IACpD,OAAO,IAAI,CAACR,KAAK,CAAA;AACnB,GAAA;AAEA,EAAA,IAAWS,KAAK,GAAG;AACjB,IAAA,OAAO,IAAI,CAACD,sBAAsB,EAAE,CAACT,OAAO,CAAA;AAC9C,GAAA;AAEA,EAAA,IAAWI,SAAS,GAAG;AACrB,IAAA,OAAO,IAAI,CAACK,sBAAsB,EAAE,CAACE,IAAI,IAAI,EAAE,CAAA;AACjD,GAAA;AACF,CAAA;;AAEA;AACO,MAAMC,+BAA+B,SAASf,QAAQ,CAAC;EAE5DE,WAAW,CAACE,KAAY,EAAE;AACxB,IAAA,MAAMD,OAAO,GACX,0CAA0C,GAC1C,2DAA2D,CAAA;AAC7D,IAAA,KAAK,CAACA,OAAO,EAAEC,KAAK,CAAC,CAAA;AAAC,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EALA,iCAAiC,CAAA,CAAA;AAMzD,GAAA;AACF,CAAA;;AAEA;AACO,MAAMY,2CAA2C,SAASD,+BAA+B,CAAC;EAI/Fb,WAAW,CAACe,QAAoC,EAAE;IAChD,MAAMC,UAAU,GAAIL,KAA8B,IAAa;AAC7D,MAAA,IAAI,CAACA,KAAK,EAAE,OAAO,eAAe,CAAA;AAClC,MAAA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAOA,KAAK,CAAA;MAC3C,IAAI;AACF,QAAA,OAAOM,IAAI,CAACC,SAAS,CAACP,KAAK,CAAC,CAAA;OAC7B,CAAC,OAAOA,KAAK,EAAE;AACd,QAAA,OAAO,eAAe,CAAA;AACxB,OAAA;KACD,CAAA;AAED,IAAA,KAAK,CAAC,IAAIQ,KAAK,CAACH,UAAU,CAACD,QAAQ,CAACK,KAAK,CAACC,GAAG,CAAC,CAAC,CAAC,CAAA;AAAC,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EAd3B,6CAA6C,CAAA,CAAA;IAenE,IAAI,CAACN,QAAQ,GAAGA,QAAQ,CAAA;AAC1B,GAAA;AAEA,EAAA,IAAWJ,KAAK,GAAqB;IACnC,OAAO,IAAI,CAACI,QAAQ,CAACK,KAAK,CAACC,GAAG,IAAI,eAAe,CAAA;AACnD,GAAA;AACF;;;;"}