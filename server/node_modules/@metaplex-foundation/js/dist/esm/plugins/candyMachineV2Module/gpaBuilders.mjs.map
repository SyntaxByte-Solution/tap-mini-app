{"version":3,"file":"gpaBuilders.mjs","sources":["../../../../src/plugins/candyMachineV2Module/gpaBuilders.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '@/utils';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO(thlorenz): copied from candy machine SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst candyMachineV2Discriminator: AccountDiscriminator = [\n  51, 173, 177, 113, 25, 241, 109, 189,\n];\n\nconst AUTHORITY = candyMachineV2Discriminator.length;\nconst WALLET = AUTHORITY + PublicKey.default.toBytes().byteLength;\n\nexport class CandyMachineV2GpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  candyMachineAccounts() {\n    return this.whereDiscriminator(candyMachineV2Discriminator);\n  }\n\n  // wallet same as solTreasury\n  candyMachineAccountsForWallet(wallet: PublicKey) {\n    return this.candyMachineAccounts().where(WALLET, wallet.toBase58());\n  }\n\n  candyMachineAccountsForAuthority(authority: PublicKey) {\n    return this.candyMachineAccounts().where(AUTHORITY, authority.toBase58());\n  }\n}\n"],"names":["candyMachineV2Discriminator","AUTHORITY","length","WALLET","PublicKey","default","toBytes","byteLength","CandyMachineV2GpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","candyMachineAccounts","candyMachineAccountsForWallet","wallet","toBase58","candyMachineAccountsForAuthority","authority"],"mappings":";;;AAaA;AACA;AACA,MAAMA,2BAAiD,GAAG,CACxD,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CACrC,CAAA;AAED,MAAMC,SAAS,GAAGD,2BAA2B,CAACE,MAAM,CAAA;AACpD,MAAMC,MAAM,GAAGF,SAAS,GAAGG,SAAS,CAACC,OAAO,CAACC,OAAO,EAAE,CAACC,UAAU,CAAA;AAE1D,MAAMC,wBAAwB,SAASC,UAAU,CAAC;EACvDC,kBAAkB,CAACC,WAAiC,EAAE;AACpD,IAAA,OAAO,IAAI,CAACC,KAAK,CAAC,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC,CAAA;AAChD,GAAA;AAEAI,EAAAA,oBAAoB,GAAG;AACrB,IAAA,OAAO,IAAI,CAACL,kBAAkB,CAACV,2BAA2B,CAAC,CAAA;AAC7D,GAAA;;AAEA;EACAgB,6BAA6B,CAACC,MAAiB,EAAE;AAC/C,IAAA,OAAO,IAAI,CAACF,oBAAoB,EAAE,CAACH,KAAK,CAACT,MAAM,EAAEc,MAAM,CAACC,QAAQ,EAAE,CAAC,CAAA;AACrE,GAAA;EAEAC,gCAAgC,CAACC,SAAoB,EAAE;AACrD,IAAA,OAAO,IAAI,CAACL,oBAAoB,EAAE,CAACH,KAAK,CAACX,SAAS,EAAEmB,SAAS,CAACF,QAAQ,EAAE,CAAC,CAAA;AAC3E,GAAA;AACF;;;;"}