{"version":3,"file":"accounts.cjs","sources":["../../../../src/plugins/nftModule/accounts.ts"],"sourcesContent":["import { Buffer } from 'buffer';\nimport {\n  Edition,\n  Key,\n  MasterEditionV1,\n  MasterEditionV2,\n  Metadata,\n} from '@metaplex-foundation/mpl-token-metadata';\nimport {\n  Account,\n  SolitaType,\n  getAccountParsingAndAssertingFunction,\n  getAccountParsingFunction,\n} from '@/types';\nimport { NotYetImplementedError } from '@/errors';\n\n/** @group Accounts */\nexport type MetadataAccount = Account<Metadata>;\n\n/** @group Account Helpers */\nexport const parseMetadataAccount = getAccountParsingFunction(Metadata);\n\n/** @group Account Helpers */\nexport const toMetadataAccount =\n  getAccountParsingAndAssertingFunction(Metadata);\n\n/** @group Accounts */\nexport type OriginalOrPrintEditionAccountData =\n  | OriginalEditionAccountData\n  | PrintEditionAccountData;\n\n/** @group Accounts */\nexport type OriginalOrPrintEditionAccount =\n  Account<OriginalOrPrintEditionAccountData>;\n\nconst originalOrPrintEditionAccountParser: SolitaType<OriginalOrPrintEditionAccountData> =\n  {\n    name: 'MasterEditionV1 | MasterEditionV2 | Edition',\n    deserialize: (data: Buffer, offset = 0) => {\n      if (data?.[0] === Key.MasterEditionV1) {\n        return MasterEditionV1.deserialize(data, offset);\n      } else if (data?.[0] === Key.MasterEditionV2) {\n        return MasterEditionV2.deserialize(data, offset);\n      }\n      return Edition.deserialize(data, offset);\n    },\n    fromArgs() {\n      throw new NotYetImplementedError();\n    },\n  };\n\n/** @group Account Helpers */\nexport const parseOriginalOrPrintEditionAccount =\n  getAccountParsingFunction<OriginalOrPrintEditionAccountData>(\n    originalOrPrintEditionAccountParser\n  );\n\n/** @group Account Helpers */\nexport const toOriginalOrPrintEditionAccount =\n  getAccountParsingAndAssertingFunction<OriginalOrPrintEditionAccountData>(\n    originalOrPrintEditionAccountParser\n  );\n\n/** @group Account Helpers */\nexport const isOriginalEditionAccount = (\n  account: OriginalOrPrintEditionAccount\n): account is OriginalEditionAccount => {\n  return 'maxSupply' in account.data;\n};\n\n/** @group Account Helpers */\nexport const isPrintEditionAccount = (\n  account: OriginalOrPrintEditionAccount\n): account is PrintEditionAccount => {\n  return !isOriginalEditionAccount(account);\n};\n\n/** @group Accounts */\nexport type OriginalEditionAccountData = MasterEditionV1 | MasterEditionV2;\n\n/** @group Accounts */\nexport type OriginalEditionAccount = Account<OriginalEditionAccountData>;\n\nconst originalEditionAccountParser: SolitaType<OriginalEditionAccountData> = {\n  name: 'MasterEditionV1 | MasterEditionV2',\n  deserialize: (data: Buffer, offset = 0) => {\n    if (data?.[0] === Key.MasterEditionV1) {\n      return MasterEditionV1.deserialize(data, offset);\n    }\n    return MasterEditionV2.deserialize(data, offset);\n  },\n  fromArgs() {\n    throw new NotYetImplementedError();\n  },\n};\n\n/** @group Account Helpers */\nexport const parseOriginalEditionAccount =\n  getAccountParsingFunction<OriginalEditionAccountData>(\n    originalEditionAccountParser\n  );\n\n/** @group Account Helpers */\nexport const toOriginalEditionAccount =\n  getAccountParsingAndAssertingFunction<OriginalEditionAccountData>(\n    originalEditionAccountParser\n  );\n\n/** @group Accounts */\nexport type PrintEditionAccountData = Edition;\n\n/** @group Accounts */\nexport type PrintEditionAccount = Account<PrintEditionAccountData>;\n\n/** @group Account Helpers */\nexport const parsePrintEditionAccount = getAccountParsingFunction(Edition);\n\n/** @group Account Helpers */\nexport const toPrintEditionAccount =\n  getAccountParsingAndAssertingFunction(Edition);\n"],"names":["parseMetadataAccount","getAccountParsingFunction","Metadata","toMetadataAccount","getAccountParsingAndAssertingFunction","originalOrPrintEditionAccountParser","name","deserialize","data","offset","Key","MasterEditionV1","MasterEditionV2","Edition","fromArgs","NotYetImplementedError","parseOriginalOrPrintEditionAccount","toOriginalOrPrintEditionAccount","isOriginalEditionAccount","account","isPrintEditionAccount","originalEditionAccountParser","parseOriginalEditionAccount","toOriginalEditionAccount","parsePrintEditionAccount","toPrintEditionAccount"],"mappings":";;;;;;;;AAgBA;;AAGA;MACaA,oBAAoB,GAAGC,iCAAyB,CAACC,yBAAQ,EAAC;;AAEvE;MACaC,iBAAiB,GAC5BC,6CAAqC,CAACF,yBAAQ,EAAC;;AAEjD;;AASA,MAAMG,mCAAkF,GACtF;AACEC,EAAAA,IAAI,EAAE,6CAA6C;AACnDC,EAAAA,WAAW,EAAE,CAACC,IAAY,EAAEC,MAAM,GAAG,CAAC,KAAK;IACzC,IAAID,IAAI,GAAG,CAAC,CAAC,KAAKE,oBAAG,CAACC,eAAe,EAAE;AACrC,MAAA,OAAOA,gCAAe,CAACJ,WAAW,CAACC,IAAI,EAAEC,MAAM,CAAC,CAAA;KACjD,MAAM,IAAID,IAAI,GAAG,CAAC,CAAC,KAAKE,oBAAG,CAACE,eAAe,EAAE;AAC5C,MAAA,OAAOA,gCAAe,CAACL,WAAW,CAACC,IAAI,EAAEC,MAAM,CAAC,CAAA;AAClD,KAAA;AACA,IAAA,OAAOI,wBAAO,CAACN,WAAW,CAACC,IAAI,EAAEC,MAAM,CAAC,CAAA;GACzC;AACDK,EAAAA,QAAQ,GAAG;IACT,MAAM,IAAIC,+BAAsB,EAAE,CAAA;AACpC,GAAA;AACF,CAAC,CAAA;;AAEH;MACaC,kCAAkC,GAC7Cf,iCAAyB,CACvBI,mCAAmC,EACpC;;AAEH;MACaY,+BAA+B,GAC1Cb,6CAAqC,CACnCC,mCAAmC,EACpC;;AAEH;AACaa,MAAAA,wBAAwB,GACnCC,OAAsC,IACA;AACtC,EAAA,OAAO,WAAW,IAAIA,OAAO,CAACX,IAAI,CAAA;AACpC,EAAC;;AAED;AACaY,MAAAA,qBAAqB,GAChCD,OAAsC,IACH;AACnC,EAAA,OAAO,CAACD,wBAAwB,CAACC,OAAO,CAAC,CAAA;AAC3C,EAAC;;AAED;;AAMA,MAAME,4BAAoE,GAAG;AAC3Ef,EAAAA,IAAI,EAAE,mCAAmC;AACzCC,EAAAA,WAAW,EAAE,CAACC,IAAY,EAAEC,MAAM,GAAG,CAAC,KAAK;IACzC,IAAID,IAAI,GAAG,CAAC,CAAC,KAAKE,oBAAG,CAACC,eAAe,EAAE;AACrC,MAAA,OAAOA,gCAAe,CAACJ,WAAW,CAACC,IAAI,EAAEC,MAAM,CAAC,CAAA;AAClD,KAAA;AACA,IAAA,OAAOG,gCAAe,CAACL,WAAW,CAACC,IAAI,EAAEC,MAAM,CAAC,CAAA;GACjD;AACDK,EAAAA,QAAQ,GAAG;IACT,MAAM,IAAIC,+BAAsB,EAAE,CAAA;AACpC,GAAA;AACF,CAAC,CAAA;;AAED;MACaO,2BAA2B,GACtCrB,iCAAyB,CACvBoB,4BAA4B,EAC7B;;AAEH;MACaE,wBAAwB,GACnCnB,6CAAqC,CACnCiB,4BAA4B,EAC7B;;AAEH;;AAMA;MACaG,wBAAwB,GAAGvB,iCAAyB,CAACY,wBAAO,EAAC;;AAE1E;MACaY,qBAAqB,GAChCrB,6CAAqC,CAACS,wBAAO;;;;;;;;;;;;;"}