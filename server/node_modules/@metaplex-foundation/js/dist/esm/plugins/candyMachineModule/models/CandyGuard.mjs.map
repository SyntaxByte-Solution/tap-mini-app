{"version":3,"file":"CandyGuard.mjs","sources":["../../../../../src/plugins/candyMachineModule/models/CandyGuard.ts"],"sourcesContent":["import {\n  CandyGuard as MplCandyGuard,\n  candyGuardBeet,\n} from '@metaplex-foundation/mpl-candy-guard';\nimport { CANDY_GUARD_DATA } from '../constants';\nimport { CandyGuardsSettings } from '../guards';\nimport {\n  AccountInfo,\n  assertModel,\n  createSerializerFromSolitaType,\n  deserializeAccount,\n  isModel,\n  Model,\n  Pda,\n  PublicKey,\n  toAccountInfo,\n  UnparsedAccount,\n} from '@/types';\nimport { Metaplex } from '@/Metaplex';\n\n/** @group Models */\nexport type CandyGuard<T extends CandyGuardsSettings> = Model<'candyGuard'> & {\n  /** The PDA address of the Candy Guard account. */\n  readonly address: Pda;\n\n  /** Blockchain data of the Candy Guard account. */\n  readonly accountInfo: AccountInfo;\n\n  /** The address used to derive the Candy Guard's PDA. */\n  readonly baseAddress: PublicKey;\n\n  /** The address allowed to update the Candy Guard account */\n  readonly authorityAddress: PublicKey;\n\n  /**\n   * This object provides the settings for all guards in the Candy Guard.\n   *\n   * If a guard is set to `null`, it is disabled. Otherwise, it is enabled and\n   * the object contains the settings for that guard.\n   */\n  readonly guards: T;\n\n  /**\n   * This parameter allows us to create multiple minting groups that have their\n   * own set of requirements â€” i.e. guards.\n   *\n   * When groups are provided, the `guards` parameter becomes a set of default\n   * guards that will be applied to all groups. If a specific group enables\n   * a guard that is also present in the default guards, the group's guard\n   * will override the default guard.\n   *\n   * Each group functions the same way as the `guards` parameter, where a guard\n   * is enabled if and only if it is not `null`.\n   */\n  readonly groups: { label: string; guards: T }[];\n};\n\n/** @group Model Helpers */\nexport const isCandyGuard = <T extends CandyGuardsSettings>(\n  value: any\n): value is CandyGuard<T> => isModel('candyGuard', value);\n\n/** @group Model Helpers */\nexport function assertCandyGuard<T extends CandyGuardsSettings>(\n  value: any\n): asserts value is CandyGuard<T> {\n  assertModel(isCandyGuard(value), `Expected CandyGuard model`);\n}\n\n/** @group Model Helpers */\nexport const toCandyGuard = <T extends CandyGuardsSettings>(\n  account: UnparsedAccount,\n  metaplex: Metaplex\n): CandyGuard<T> => {\n  const candyGuardSerializer = createSerializerFromSolitaType(\n    MplCandyGuard,\n    candyGuardBeet.description\n  );\n  const parsedCandyGuard = deserializeAccount(account, candyGuardSerializer);\n\n  const { guards, groups } = metaplex\n    .candyMachines()\n    .guards()\n    .deserializeSettings<T>(\n      account.data.slice(CANDY_GUARD_DATA),\n      account.owner\n    );\n\n  return {\n    model: 'candyGuard',\n    address: new Pda(parsedCandyGuard.publicKey, parsedCandyGuard.data.bump),\n    accountInfo: toAccountInfo(account),\n    baseAddress: parsedCandyGuard.data.base,\n    authorityAddress: parsedCandyGuard.data.authority,\n    guards,\n    groups,\n  };\n};\n"],"names":["isCandyGuard","value","isModel","assertCandyGuard","assertModel","toCandyGuard","account","metaplex","candyGuardSerializer","createSerializerFromSolitaType","MplCandyGuard","candyGuardBeet","description","parsedCandyGuard","deserializeAccount","guards","groups","candyMachines","deserializeSettings","data","slice","CANDY_GUARD_DATA","owner","model","address","Pda","publicKey","bump","accountInfo","toAccountInfo","baseAddress","base","authorityAddress","authority"],"mappings":";;;;;;;AAyDA;AACO,MAAMA,YAAY,GACvBC,KAAU,IACiBC,OAAO,CAAC,YAAY,EAAED,KAAK,EAAC;;AAEzD;AACO,SAASE,gBAAgB,CAC9BF,KAAU,EACsB;AAChCG,EAAAA,WAAW,CAACJ,YAAY,CAACC,KAAK,CAAC,EAAG,2BAA0B,CAAC,CAAA;AAC/D,CAAA;;AAEA;MACaI,YAAY,GAAG,CAC1BC,OAAwB,EACxBC,QAAkB,KACA;EAClB,MAAMC,oBAAoB,GAAGC,8BAA8B,CACzDC,UAAa,EACbC,cAAc,CAACC,WAAW,CAC3B,CAAA;AACD,EAAA,MAAMC,gBAAgB,GAAGC,kBAAkB,CAACR,OAAO,EAAEE,oBAAoB,CAAC,CAAA;EAE1E,MAAM;IAAEO,MAAM;AAAEC,IAAAA,MAAAA;GAAQ,GAAGT,QAAQ,CAChCU,aAAa,EAAE,CACfF,MAAM,EAAE,CACRG,mBAAmB,CAClBZ,OAAO,CAACa,IAAI,CAACC,KAAK,CAACC,gBAAgB,CAAC,EACpCf,OAAO,CAACgB,KAAK,CACd,CAAA;EAEH,OAAO;AACLC,IAAAA,KAAK,EAAE,YAAY;AACnBC,IAAAA,OAAO,EAAE,IAAIC,GAAG,CAACZ,gBAAgB,CAACa,SAAS,EAAEb,gBAAgB,CAACM,IAAI,CAACQ,IAAI,CAAC;AACxEC,IAAAA,WAAW,EAAEC,aAAa,CAACvB,OAAO,CAAC;AACnCwB,IAAAA,WAAW,EAAEjB,gBAAgB,CAACM,IAAI,CAACY,IAAI;AACvCC,IAAAA,gBAAgB,EAAEnB,gBAAgB,CAACM,IAAI,CAACc,SAAS;IACjDlB,MAAM;AACNC,IAAAA,MAAAA;GACD,CAAA;AACH;;;;"}