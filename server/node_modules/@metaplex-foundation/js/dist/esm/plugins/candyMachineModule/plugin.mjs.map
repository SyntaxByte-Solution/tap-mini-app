{"version":3,"file":"plugin.mjs","sources":["../../../../src/plugins/candyMachineModule/plugin.ts"],"sourcesContent":["import { ProgramClient } from '../programModule';\nimport { CandyMachineClient } from './CandyMachineClient';\nimport {\n  addressGateGuardManifest,\n  allowListGuardManifest,\n  botTaxGuardManifest,\n  endDateGuardManifest,\n  gatekeeperGuardManifest,\n  mintLimitGuardManifest,\n  nftBurnGuardManifest,\n  nftGateGuardManifest,\n  nftPaymentGuardManifest,\n  programGateGuardManifest,\n  redeemedAmountGuardManifest,\n  solPaymentGuardManifest,\n  startDateGuardManifest,\n  thirdPartySignerGuardManifest,\n  tokenBurnGuardManifest,\n  tokenGateGuardManifest,\n  tokenPaymentGuardManifest,\n} from './guards';\nimport {\n  CallCandyGuardRouteOperation,\n  callCandyGuardRouteOperation,\n  callCandyGuardRouteOperationHandler,\n  createCandyGuardOperation,\n  createCandyGuardOperationHandler,\n  createCandyMachineOperation,\n  createCandyMachineOperationHandler,\n  deleteCandyGuardOperation,\n  deleteCandyGuardOperationHandler,\n  deleteCandyMachineOperation,\n  deleteCandyMachineOperationHandler,\n  findCandyGuardByAddressOperation,\n  findCandyGuardByAddressOperationHandler,\n  findCandyGuardsByAuthorityOperation,\n  findCandyGuardsByAuthorityOperationHandler,\n  findCandyMachineByAddressOperation,\n  findCandyMachineByAddressOperationHandler,\n  insertCandyMachineItemsOperation,\n  insertCandyMachineItemsOperationHandler,\n  mintFromCandyMachineOperation,\n  mintFromCandyMachineOperationHandler,\n  unwrapCandyGuardOperation,\n  unwrapCandyGuardOperationHandler,\n  updateCandyGuardOperation,\n  updateCandyGuardOperationHandler,\n  updateCandyMachineOperation,\n  updateCandyMachineOperationHandler,\n  wrapCandyGuardOperation,\n  wrapCandyGuardOperationHandler,\n} from './operations';\nimport {\n  CandyGuardProgram,\n  candyMachineProgram,\n  defaultCandyGuardProgram,\n  gatewayProgram,\n} from './programs';\nimport {\n  updateCandyGuardAuthorityOperation,\n  updateCandyGuardAuthorityOperationHandler,\n} from './operations/updateCandyGuardAuthority';\nimport { freezeSolPaymentGuardManifest } from './guards/freezeSolPayment';\nimport { freezeTokenPaymentGuardManifest } from './guards/freezeTokenPayment';\nimport { MetaplexPlugin, OperationConstructor, Program } from '@/types';\nimport type { Metaplex } from '@/Metaplex';\n\n/** @group Plugins */\nexport const candyMachineModule = (): MetaplexPlugin => ({\n  install(metaplex: Metaplex) {\n    // Client.\n    const client = new CandyMachineClient(metaplex);\n    metaplex.candyMachines = () => client;\n\n    // Candy Machine Program.\n    metaplex.programs().register(candyMachineProgram);\n    metaplex.programs().getCandyMachine = function (\n      this: ProgramClient,\n      programs?: Program[]\n    ) {\n      return this.get(candyMachineProgram.name, programs);\n    };\n\n    // Candy Guard Program.\n    metaplex.programs().register(defaultCandyGuardProgram);\n    metaplex.programs().getCandyGuard = function <T extends CandyGuardProgram>(\n      this: ProgramClient,\n      programs?: Program[]\n    ): T {\n      return this.get(defaultCandyGuardProgram.name, programs);\n    };\n\n    // Gateway Program.\n    metaplex.programs().register(gatewayProgram);\n    metaplex.programs().getGateway = function (\n      this: ProgramClient,\n      programs?: Program[]\n    ) {\n      return this.get(gatewayProgram.name, programs);\n    };\n\n    // Default Guards.\n    client.guards().register(botTaxGuardManifest);\n    client.guards().register(solPaymentGuardManifest);\n    client.guards().register(tokenPaymentGuardManifest);\n    client.guards().register(startDateGuardManifest);\n    client.guards().register(thirdPartySignerGuardManifest);\n    client.guards().register(tokenGateGuardManifest);\n    client.guards().register(gatekeeperGuardManifest);\n    client.guards().register(endDateGuardManifest);\n    client.guards().register(allowListGuardManifest);\n    client.guards().register(mintLimitGuardManifest);\n    client.guards().register(nftPaymentGuardManifest);\n    client.guards().register(redeemedAmountGuardManifest);\n    client.guards().register(addressGateGuardManifest);\n    client.guards().register(nftGateGuardManifest);\n    client.guards().register(nftBurnGuardManifest);\n    client.guards().register(tokenBurnGuardManifest);\n    client.guards().register(freezeSolPaymentGuardManifest);\n    client.guards().register(freezeTokenPaymentGuardManifest);\n    client.guards().register(programGateGuardManifest);\n\n    // Operations.\n    const op = metaplex.operations();\n    op.register(\n      callCandyGuardRouteOperation as OperationConstructor<\n        CallCandyGuardRouteOperation<any>\n      >,\n      callCandyGuardRouteOperationHandler\n    );\n    op.register(createCandyGuardOperation, createCandyGuardOperationHandler);\n    op.register(\n      createCandyMachineOperation,\n      createCandyMachineOperationHandler\n    );\n    op.register(deleteCandyGuardOperation, deleteCandyGuardOperationHandler);\n    op.register(\n      deleteCandyMachineOperation,\n      deleteCandyMachineOperationHandler\n    );\n    op.register(\n      findCandyGuardByAddressOperation,\n      findCandyGuardByAddressOperationHandler\n    );\n    op.register(\n      findCandyGuardsByAuthorityOperation,\n      findCandyGuardsByAuthorityOperationHandler\n    );\n    op.register(\n      findCandyMachineByAddressOperation,\n      findCandyMachineByAddressOperationHandler\n    );\n    op.register(\n      insertCandyMachineItemsOperation,\n      insertCandyMachineItemsOperationHandler\n    );\n    op.register(\n      mintFromCandyMachineOperation,\n      mintFromCandyMachineOperationHandler\n    );\n    op.register(unwrapCandyGuardOperation, unwrapCandyGuardOperationHandler);\n    op.register(\n      updateCandyGuardAuthorityOperation,\n      updateCandyGuardAuthorityOperationHandler\n    );\n    op.register(updateCandyGuardOperation, updateCandyGuardOperationHandler);\n    op.register(\n      updateCandyMachineOperation,\n      updateCandyMachineOperationHandler\n    );\n    op.register(wrapCandyGuardOperation, wrapCandyGuardOperationHandler);\n  },\n});\n\ndeclare module '../../Metaplex' {\n  interface Metaplex {\n    candyMachines(): CandyMachineClient;\n  }\n}\n\ndeclare module '../programModule/ProgramClient' {\n  interface ProgramClient {\n    getCandyMachine(programs?: Program[]): Program;\n    getCandyGuard<T extends CandyGuardProgram>(programs?: Program[]): T;\n    getGateway(programs?: Program[]): Program;\n  }\n}\n"],"names":["candyMachineModule","install","metaplex","client","CandyMachineClient","candyMachines","programs","register","candyMachineProgram","getCandyMachine","get","name","defaultCandyGuardProgram","getCandyGuard","gatewayProgram","getGateway","guards","botTaxGuardManifest","solPaymentGuardManifest","tokenPaymentGuardManifest","startDateGuardManifest","thirdPartySignerGuardManifest","tokenGateGuardManifest","gatekeeperGuardManifest","endDateGuardManifest","allowListGuardManifest","mintLimitGuardManifest","nftPaymentGuardManifest","redeemedAmountGuardManifest","addressGateGuardManifest","nftGateGuardManifest","nftBurnGuardManifest","tokenBurnGuardManifest","freezeSolPaymentGuardManifest","freezeTokenPaymentGuardManifest","programGateGuardManifest","op","operations","callCandyGuardRouteOperation","callCandyGuardRouteOperationHandler","createCandyGuardOperation","createCandyGuardOperationHandler","createCandyMachineOperation","createCandyMachineOperationHandler","deleteCandyGuardOperation","deleteCandyGuardOperationHandler","deleteCandyMachineOperation","deleteCandyMachineOperationHandler","findCandyGuardByAddressOperation","findCandyGuardByAddressOperationHandler","findCandyGuardsByAuthorityOperation","findCandyGuardsByAuthorityOperationHandler","findCandyMachineByAddressOperation","findCandyMachineByAddressOperationHandler","insertCandyMachineItemsOperation","insertCandyMachineItemsOperationHandler","mintFromCandyMachineOperation","mintFromCandyMachineOperationHandler","unwrapCandyGuardOperation","unwrapCandyGuardOperationHandler","updateCandyGuardAuthorityOperation","updateCandyGuardAuthorityOperationHandler","updateCandyGuardOperation","updateCandyGuardOperationHandler","updateCandyMachineOperation","updateCandyMachineOperationHandler","wrapCandyGuardOperation","wrapCandyGuardOperationHandler"],"mappings":"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"}