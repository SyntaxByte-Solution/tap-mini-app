{"version":3,"file":"ListingReceiptGpaBuilder.cjs","sources":["../../../../../src/plugins/auctionHouseModule/gpaBuilders/ListingReceiptGpaBuilder.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '@/utils';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO: copied from auction house SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst listingReceiptDiscriminator: AccountDiscriminator = [\n  240, 71, 225, 94, 200, 75, 84, 231,\n];\n\nconst PUBLIC_KEY_LENGTH = PublicKey.default.toBytes().byteLength;\n\nconst TRADE_STATE = listingReceiptDiscriminator.length;\nconst BOOKKEEPER = TRADE_STATE + PUBLIC_KEY_LENGTH;\nconst AUCTION_HOUSE = BOOKKEEPER + PUBLIC_KEY_LENGTH;\nconst SELLER = AUCTION_HOUSE + PUBLIC_KEY_LENGTH;\nconst METADATA = SELLER + PUBLIC_KEY_LENGTH;\n\nexport class ListingReceiptGpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  listingReceiptAccounts() {\n    return this.whereDiscriminator(listingReceiptDiscriminator);\n  }\n\n  whereAuctionHouse(auctionHouseAddress: PublicKey) {\n    return this.listingReceiptAccounts().where(\n      AUCTION_HOUSE,\n      auctionHouseAddress\n    );\n  }\n\n  whereSeller(sellerAddress: PublicKey) {\n    return this.where(SELLER, sellerAddress);\n  }\n\n  whereMetadata(metadataAddress: PublicKey) {\n    return this.where(METADATA, metadataAddress);\n  }\n}\n"],"names":["listingReceiptDiscriminator","PUBLIC_KEY_LENGTH","PublicKey","default","toBytes","byteLength","TRADE_STATE","length","BOOKKEEPER","AUCTION_HOUSE","SELLER","METADATA","ListingReceiptGpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","listingReceiptAccounts","whereAuctionHouse","auctionHouseAddress","whereSeller","sellerAddress","whereMetadata","metadataAddress"],"mappings":";;;;;;;AAaA;AACA;AACA,MAAMA,2BAAiD,GAAG,CACxD,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CACnC,CAAA;AAED,MAAMC,iBAAiB,GAAGC,iBAAS,CAACC,OAAO,CAACC,OAAO,EAAE,CAACC,UAAU,CAAA;AAEhE,MAAMC,WAAW,GAAGN,2BAA2B,CAACO,MAAM,CAAA;AACtD,MAAMC,UAAU,GAAGF,WAAW,GAAGL,iBAAiB,CAAA;AAClD,MAAMQ,aAAa,GAAGD,UAAU,GAAGP,iBAAiB,CAAA;AACpD,MAAMS,MAAM,GAAGD,aAAa,GAAGR,iBAAiB,CAAA;AAChD,MAAMU,QAAQ,GAAGD,MAAM,GAAGT,iBAAiB,CAAA;AAEpC,MAAMW,wBAAwB,SAASC,qBAAU,CAAC;EACvDC,kBAAkB,CAACC,WAAiC,EAAE;AACpD,IAAA,OAAO,IAAI,CAACC,KAAK,CAAC,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC,CAAA;AAChD,GAAA;AAEAI,EAAAA,sBAAsB,GAAG;AACvB,IAAA,OAAO,IAAI,CAACL,kBAAkB,CAACd,2BAA2B,CAAC,CAAA;AAC7D,GAAA;EAEAoB,iBAAiB,CAACC,mBAA8B,EAAE;IAChD,OAAO,IAAI,CAACF,sBAAsB,EAAE,CAACH,KAAK,CACxCP,aAAa,EACbY,mBAAmB,CACpB,CAAA;AACH,GAAA;EAEAC,WAAW,CAACC,aAAwB,EAAE;AACpC,IAAA,OAAO,IAAI,CAACP,KAAK,CAACN,MAAM,EAAEa,aAAa,CAAC,CAAA;AAC1C,GAAA;EAEAC,aAAa,CAACC,eAA0B,EAAE;AACxC,IAAA,OAAO,IAAI,CAACT,KAAK,CAACL,QAAQ,EAAEc,eAAe,CAAC,CAAA;AAC9C,GAAA;AACF;;;;"}