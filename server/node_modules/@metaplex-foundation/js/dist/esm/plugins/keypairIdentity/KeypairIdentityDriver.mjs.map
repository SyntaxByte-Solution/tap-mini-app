{"version":3,"file":"KeypairIdentityDriver.mjs","sources":["../../../../src/plugins/keypairIdentity/KeypairIdentityDriver.ts"],"sourcesContent":["import * as ed25519 from '@noble/ed25519';\nimport { Keypair, PublicKey, Transaction } from '@solana/web3.js';\nimport { IdentityDriver } from '../identityModule';\nimport { KeypairSigner } from '@/types';\n\nexport class KeypairIdentityDriver implements IdentityDriver, KeypairSigner {\n  public readonly keypair: Keypair;\n  public readonly publicKey: PublicKey;\n  public readonly secretKey: Uint8Array;\n\n  constructor(keypair: Keypair) {\n    this.keypair = keypair;\n    this.publicKey = keypair.publicKey;\n    this.secretKey = keypair.secretKey;\n  }\n\n  public async signMessage(message: Uint8Array): Promise<Uint8Array> {\n    return ed25519.sync.sign(message, this.secretKey.slice(0, 32));\n  }\n\n  public async signTransaction(transaction: Transaction): Promise<Transaction> {\n    transaction.partialSign(this.keypair);\n\n    return transaction;\n  }\n\n  public async signAllTransactions(\n    transactions: Transaction[]\n  ): Promise<Transaction[]> {\n    return Promise.all(\n      transactions.map((transaction) => this.signTransaction(transaction))\n    );\n  }\n}\n"],"names":["KeypairIdentityDriver","constructor","keypair","publicKey","secretKey","signMessage","message","ed25519","sync","sign","slice","signTransaction","transaction","partialSign","signAllTransactions","transactions","Promise","all","map"],"mappings":";;AAKO,MAAMA,qBAAqB,CAA0C;EAK1EC,WAAW,CAACC,OAAgB,EAAE;IAC5B,IAAI,CAACA,OAAO,GAAGA,OAAO,CAAA;AACtB,IAAA,IAAI,CAACC,SAAS,GAAGD,OAAO,CAACC,SAAS,CAAA;AAClC,IAAA,IAAI,CAACC,SAAS,GAAGF,OAAO,CAACE,SAAS,CAAA;AACpC,GAAA;EAEA,MAAaC,WAAW,CAACC,OAAmB,EAAuB;AACjE,IAAA,OAAOC,OAAO,CAACC,IAAI,CAACC,IAAI,CAACH,OAAO,EAAE,IAAI,CAACF,SAAS,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;AAChE,GAAA;EAEA,MAAaC,eAAe,CAACC,WAAwB,EAAwB;AAC3EA,IAAAA,WAAW,CAACC,WAAW,CAAC,IAAI,CAACX,OAAO,CAAC,CAAA;AAErC,IAAA,OAAOU,WAAW,CAAA;AACpB,GAAA;EAEA,MAAaE,mBAAmB,CAC9BC,YAA2B,EACH;AACxB,IAAA,OAAOC,OAAO,CAACC,GAAG,CAChBF,YAAY,CAACG,GAAG,CAAEN,WAAW,IAAK,IAAI,CAACD,eAAe,CAACC,WAAW,CAAC,CAAC,CACrE,CAAA;AACH,GAAA;AACF;;;;"}